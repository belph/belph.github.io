/*!
 * Amplify Core 1.1.2
 *
 * Copyright 2011 - 2013 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
(function(b,d){var c=[].slice,e={};var a=b.amplify={publish:function(h){if(typeof h!=="string"){throw new Error("You must provide a valid topic to publish.")}var g=c.call(arguments,1),m,l,k,j=0,f;if(!e[h]){return true}m=e[h].slice();for(k=m.length;j<k;j++){l=m[j];f=l.callback.apply(l.context,g);if(f===false){break}}return f!==false},subscribe:function(k,g,p,n){if(typeof k!=="string"){throw new Error("You must provide a valid topic to create a subscription.")}if(arguments.length===3&&typeof p==="number"){n=p;p=g;g=null}if(arguments.length===2){p=g;g=null}n=n||10;var h=0,f=k.split(/\s/),o=f.length,m;for(;h<o;h++){k=f[h];m=false;if(!e[k]){e[k]=[]}var j=e[k].length-1,l={callback:p,context:g,priority:n};for(;j>=0;j--){if(e[k][j].priority<=n){e[k].splice(j+1,0,l);m=true;break}}if(!m){e[k].unshift(l)}}return p},unsubscribe:function(f,h,k){if(typeof f!=="string"){throw new Error("You must provide a valid topic to remove a subscription.")}if(arguments.length===2){k=h;h=null}if(!e[f]){return}var j=e[f].length,g=0;for(;g<j;g++){if(e[f][g].callback===k){if(!h||e[f][g].context===h){e[f].splice(g,1);g--;j--}}}}}}(this));(function(d,e){var c;function b(g){var l=g.split("."),j=c,f="";for(var h=0,k=l.length;h<k;h++){f=l[h];j[f]=j[f]||{};j=j[f]}return j}function a(g){var f=BI.env.getDomain(true)||"businessinsider.com";var h=["static1","static2","static3","static4","static5","static6"];return"http://"+h[Math.floor(Math.random()*h.length)]+"."+f+g}c={namespace:b,CDNPath:a};d.BI=d.BI||c;b("abTests");b("post");b("comments");b("authenticated.twitter");b("authenticated.facebook");b("authenticated.linkedin");b("authenticated.googleplus")})(window);(function(b,e){var d;b.namespace("cookies");function c(j,k,h){var g="";if(h){var i=new Date();i.setTime(i.getTime()+(h*60*60*1000));g="; expires="+i.toGMTString()}document.cookie=j+"="+k+g+"; path=/"}function a(h){var k=h+"=";var g=document.cookie.split(";");for(var j=0;j<g.length;j++){var l=g[j];while(l.charAt(0)==" "){l=l.substring(1,l.length)}if(l.indexOf(k)==0){return l.substring(k.length,l.length)}}return null}function f(g){if(a(g)){var h=new Date();document.cookie=g+"=0;expires="+h.toGMTString()+";path=/;";return true}}d={set:c,get:a,clear:f};b.cookies=d}(BI));(function(a,d){var b;a.namespace("iframe");var c=function(f,e){if(e<=5){return}var g=document.getElementById(f);g.height=e+"px";return true};b={expand:c};a.iframe=b;a.expandIframe=a.iframe.expand}(BI));(function(b,f){b.namespace("env");var d;function e(g){d=g;return d}function c(g){if(g){return d.replace(d.split(".")[0]+".","")}return d}function a(){var g=window.location.host;return g.split(".")[0]=="www"||g.split(".")[0]=="stage"||g.indexOf("uk.businessinsider")>-1}b.inProduction=a;b.env={inProduction:a,setDomain:e,getDomain:c}}(BI));(function(b,d){var c;b.namespace("UUID");function a(){var f=new Date().getTime();var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var g=(f+Math.random()*16)%16|0;f=Math.floor(f/16);return(h=="x"?g:(g&7|8)).toString(16)});return e}c={get:a};b.UUID=c}(BI));(function(b,f){var e;var d={};b.namespace("pageData");function g(h,i){d[h]=i}function a(h){return d[h]}function c(h){return d}e={set:g,get:a,getAll:c};b.pageData=e}(BI));(function(b,g){var d;var h;b.namespace("rubicon");function e(){var i="http://tap-cdn.rubiconproject.com/partner/scripts/rubicon/dorothy.js?pc=10306/29788";var k=document.createElement("script");var j;k.src=i;document.head.appendChild(k);oz_api="valuation";oz_site="10306/29788";oz_async=true;oz_callback=function(l){window.parent.BI.rubicon.onInsightLoaded(window.rp_valuation,window.instanceId)}}function c(j,i){if(a[i]&&typeof a[i].cb==="function"){a[i].cb(j);delete a[i]}}var a={};function f(i,n,o){var l=b.UUID.get();var k=document.createElement("iframe");k.style.display="none";var j=document.createElement("script");var m='instanceId = "'+l+'"; oz_zone = "'+n+'"; oz_ad_slot_size = "'+i+'"; setGlobals();';j.text="setGlobals = "+e.toString()+";"+m;k.onload=function(){k.contentWindow.document.head.appendChild(j)};document.getElementsByTagName("body")[0].appendChild(k);a[l]={cb:o,iframe:k}}d={query:f,onInsightLoaded:c};b.rubicon=d}(BI));(function(a,c){var b;a.namespace("configs.ads");b={};a.configs.ads=b}(BI));(function(J){var V;var ah;var R;var h;var ag;var N;var b;var m;var M;var E;var A;var f;var w;var z;var D;var ad;var t;var k;var o;var C;var S;var s;var u;var n=1024;var p=".vert-name a";var W=250;var F=W;var I;var c;var T;var d;var j=116;var a=new Date();var Q=100;var B=false;var q=false;var g={};var ae=false;function ac(){if(V.scrollTop()>I*2){q=true}else{q=false}if(V.width()<=n&&!ah.hasClass("condensed")){return}if(V.scrollTop()>=20){if(q&&new Date()-a<Q){return}a=new Date();G()}else{v()}}function G(){if(B||ah.hasClass("condensed")){return}ah.addClass("condensed");R.css("margin-top",j);h.removeClass("open");ag.css("margin-top",c);amplify.publish("masthead-collapsed")}function v(){if(B||!ah.hasClass("condensed")){return}ah.removeClass("condensed");R.css("margin-top",0);ag.css("margin-top",0);amplify.publish("masthead-expanded")}function af(ai){V=$(window);ah=$(".masthead");R=$(".ad-wallpaper");f=$(".main-nav");o=$(".masthead-dropdown");C=f.find(".item");S=f.find("li");h=$(".user-login.dropdown");ag=$("[data-ad-tout]");N=$(".links").find(".social");m=$("[data-search-icon-close]");A=$("[data-search-input]");s=$("[data-hamburger]");w=$("[data-nav-over]");z=w.find(".nav-sections li");D=w.find(".nav-verticals a");ad=$(".nav-sections .active");t=ad&&y(ad);k=t.length&&t.find(".active");M=$("[data-search-over]");E=M.find(".search");ai()}function y(ai){var aj=ai.find("a");var ak=aj&&aj.data("dropdown-id");return t=ak&&$("[data-id='"+ak+"']")||$()}function P(aj,ak){var ai=$(aj);ai.attr("src",ai.attr("data-src"));g[ak]=true}function l(ak){var an=ak.data;var ai;var aj;var al;ad=$(this);t=y(ad);if(t.length===0){var am=ad[0].innerText;if(typeof g[am]==="undefined"){console.log("post loading...");aj=ad.parents(".nav-verticals").siblings(".stories-container");al=aj.find('div[data-id="'+am+'"').find("img");al.each(function(){P(this,am)})}}else{H(t)}t.length&&L(t);k=t.length&&t.find(".active");$(an).removeClass("active");ad.addClass("active");ai=t.length&&!k.length&&t.find("li:first-child > a");ai.length&&ai.addClass("active");if(k.length){r(k.data("index"))}else{if(ai.length){r(ai.data("index"))}else{r(ad.data("index"))}}return false}function Y(){V.scroll(ac);D.on("tap",function(ai){if(!$(this).hasClass("active")){ai.preventDefault();$(this).trigger("mouseenter")}});b.on("click",function(){e(M,w);U(this,m);s.find(".hamburger").removeClass("open");A.focus();return false});m.on("click",function(){M.removeClass("nav-show");U(this,b);return false});s.on("click",function(){if(!ae){$(".main-nav-dropdown").find(".stories-container").find("img").each(function(){P(this)});ae=true}$(this).find(".hamburger").toggleClass("open");e(w,M);r(k.data("index"));U(m,b);return false});z.on("hover",z,l);D.on("hover",D,l);$("#main-content").click(function(){x()});$(document).on("keyup",function(ai){if(ai.keyCode==27){x()}})}function x(){M.removeClass("nav-show");U(m,b);w.removeClass("nav-show");s.find(".hamburger").removeClass("open")}function O(){L(t)}function L(ai){$(".subsection").hide();r(0);ai.show()}function r(ai){$(".stories-container > div").css("margin-left","-"+ai+"00%")}function e(aj,ai){if(aj.hasClass("nav-show")){aj.removeClass("nav-show")}else{aj.addClass("nav-show");ai.removeClass("nav-show")}}function U(aj,ai){$(aj).addClass("display-none");$(ai).removeClass("display-none")}function i(){I=ah.outerHeight();c=65;ah.addClass("condensed");T=ah.outerHeight()+Number(ah.css("top").replace("px",""));ah.removeClass("condensed");d=I-T;J.masthead.height=d}function Z(){amplify.subscribe("headerContentAddition",function(ai){I+=$(ai).height();d=I-T;J.masthead.height=d;ac()});amplify.subscribe("headerContentRemoval",function(ai){I-=$(ai).height();d=I-T;J.masthead.height=d;ac()});amplify.subscribe("interstitialAdShown",function(){G();B=true});amplify.subscribe("interstitialAdHidden",function(){B=false;v()})}function H(ak){var al=ak.find(".stories-container");var ai=al.find(".sub-vertical-container.active");var aj;if(!ai.length){ai=al.find(".sub-vertical-container").eq(0)
}else{}aj=ai.find("img");aj.each(function(){P(this)});return ak}function ab(ak){var ai=$(ak);var aj=$(p).text();ai.find('a[data-id="'+aj+'"]').each(function(am,an){var al=$(an);al.addClass("active");al.parents(".nav-verticals").siblings(".stories-container").find('div[data-id="'+aj+'"]').addClass("active")});return ai}function K(ai){$.ajax({url:"/ajax/navbar",success:function(ak){u=$(".main-nav-dropdown");var aj=$(ak);aj=ab(ak);u.html(H(aj));ai()}})}function aa(ai){b=$("[data-search-icon-open]");if(!b.length){setTimeout(aa,1000);return}K(function(){af(function(){Y();i();Z();O();s.show();b.removeClass("display-none")})})}function X(){J.masthead={height:undefined};aa()}$(X)}(BI));(function(){if(!Array.prototype.forEach){Array.prototype.forEach=function(d,c){for(var b=0,a=this.length;b<a;++b){d.call(c,this[b],b,this)}}}}());(function(e,c,b,h){var g;function d(){g=function(){g.q.push(arguments)};g.q=[];e.Krux=e.Krux||g}function f(l){var i;var j="kx"+l;if(e.localStorage){return e.localStorage[j]||""}else{if(c.cookieEnabled){i=b.cookie.match(j+"=([^;]*)");return(i&&unescape(i[1]))||""}else{return""}}}function a(){g.user=f("user");g.segments=f("segs")&&f("segs").split(",")||[]}d();a()}(window,navigator,document));(function(d,g){var f=d.jQuery||d.Cowboy||(d.Cowboy={}),e;f.throttle=e=function(m,l,a,b){var c,n=0;if(typeof l!=="boolean"){b=a;a=l;l=g}function k(){var p=this,h=+new Date()-n,q=arguments;function i(){n=+new Date();a.apply(p,q)}function j(){c=g}if(b&&!c){i()}c&&clearTimeout(c);if(b===g&&h>m){i()}else{if(l!==true){c=setTimeout(b?j:i,b===g?m-h:m)}}}if(f.guid){k.guid=a.guid=a.guid||f.guid++}return k};f.debounce=function(c,b,a){return a===g?e(c,b,false):e(c,a,b!==false)}})(this);(function(b,p,k){var c=4442842;var j;var l=[];var q={};var g=150;p.namespace("DFP");function h(t){var r=t.offsetLeft;var u=t.offsetTop;var s;s=t.offsetParent;while(s){r+=s.offsetLeft;u+=s.offsetTop;t=s;s=t.offsetParent}return{x:r,y:u}}function o(s){var t;var r=".ad.dfp";if(typeof s==="string"){r+=s}t=document.querySelectorAll(r);t.forEach=Array.prototype.forEach;return t}function i(){l.forEach(function(s){if((k.pageYOffset+k.innerHeight-g)>s.top){var r=$(s.element);if(typeof q[r.attr("data-region")]!=="undefined"){return}q[r.attr("data-region")]=true;if(r.hasClass("rubicon")){f(s.element)}else{p.DFP.renderAd(s.element)}}})}function d(){$(k).scroll($.throttle(50,i));i()}function n(){o(".lazyload:not(.rendered)").forEach(function(r){m(r)});o(".position-load").forEach(function(r){l.push({element:r,top:$(r).offset().top})});d()}function m(u,w,r){var y;var s;var v=!!u.getAttribute("data-companion-ad");var z;s="ad-"+p.UUID.get();u.setAttribute("id",s);var x=u.getAttribute("data-region");z=u.getAttribute("data-sizes").split(",");z.forEach(function(B,A){z[A]=B.split("x");z[A].forEach(function(C,D){z[A][D]=parseInt(C,10)})});var t=k.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(x==="Slideshow One Page Ad Desktop"&&document.getElementById("right-rail")&&(t<1240)){z.splice(0,3)}if(x==="Slideshow One Page Ad Desktop"&&document.getElementById("right-rail")){z.splice(0,2)}if(x==="Slideshow One Page Ad Desktop"&&(t>=1240)){z.splice(z.length-3)}googletag.cmd.push(function(){y=googletag.defineSlot("/"+c+"/"+u.getAttribute("data-adunit"),z,s);if(u.hasAttribute("data-responsive")&&!$("body").hasClass("wallpapered")){y.defineSizeMapping(JSON.parse(u.getAttribute("data-responsive")))}if(v===true){y.addService(googletag.companionAds()).addService(googletag.pubads());googletag.companionAds().setRefreshUnfilledSlots(true);googletag.pubads().disableInitialLoad();googletag.enableServices();console.log("DFP: companion ad code enabled")}else{y.addService(googletag.pubads())}if(w!==undefined){y.setCollapseEmptyDiv(w)}googletag.pubads().setTargeting("ksg",Krux.segments);googletag.pubads().setTargeting("kuid",Krux.user);googletag.pubads().setTargeting("khost",encodeURIComponent(location.hostname));p.DFP.adRegions[u.getAttribute("data-region")]=y});googletag.cmd.push(function(){function A(C){var B;if(B=u.getAttribute("data-"+C)){y.setTargeting(C,B)}}A("adunit");A("authors");A("pagetype");A("pos");A("region");A("sizes");A("tag");A("url");A("views");if(r){r(y)}});googletag.cmd.push(function(){googletag.display(s)});u.classList.add("rendered");var x=u.getAttribute("data-region");b.publish("adRendered",x)}function e(s,r){return(" "+s.className+" ").indexOf(" "+r+" ")>-1}function a(){o(":not(.rendered):not(.lazyload):not(.position-load)").forEach(function(r){if(e(r,"rubicon")){f(r)}else{m(r)}})}function f(t){var s=t.getAttribute("data-sizes").split(",")[0];var u=t.getAttribute("data-rubicon_zone_id");p.rubicon.query(s,u,function(v){m(t,false,function(w){if(v&&v.pmp){var x=typeof v.pmp.eligible!=="undefined"?v.pmp.eligible:false;w.setTargeting("deal",x)}if(v&&v.estimate){var y=typeof v.estimate.tier!=="undefined"?v.estimate.tier:false;w.setTargeting("tier",y)}})});t.classList.add("rendered");var r=t.getAttribute("data-region");b.publish("adRendered",r)}b.subscribe("adRender",a);b.subscribe("adRenderLazyLoad",n);document.addEventListener("DOMContentLoaded",n);j=document.createElement("script");j.async=true;j.src="//www.googletagservices.com/tag/js/gpt.js";j.type="text/javascript";document.head.appendChild(j);p.DFP={adRegions:{},loaded:false,renderAd:m};k.googletag=k.googletag||{cmd:[]};googletag.cmd.push(function(){googletag.pubads().enableAsyncRendering();googletag.pubads().enableVideoAds();googletag.companionAds().setRefreshUnfilledSlots(true);googletag.enableServices();p.DFP.loaded=true;b.publish("dfpLoaded")})}(amplify,BI,window));(function(){function a(){var c=document.getElementById("breaking-module-rendered");document.getElementById("breaking-module-siteskin").innerHTML=c.innerHTML;c.parentNode.removeChild(c);document.body.className=document.body.classList.remove("responsive")}function b(){setTimeout(a,0)}BI.addSiteSkinBorder=b;document.addEventListener("DOMContentLoaded",function(){if(document.querySelector('.ad[data-region="Skin"]')!==null){document.body.classList.remove("responsive")}})}());(function(d){amplify.subscribe("contentloaded-countdownclock",function(i){d.countdownTimer.end=i.end;d.countdownTimer.onFinish=i.onFinish;if(i.isTicking){d.countdownTimer.start()}else{d.countdownTimer.blink()}});var g='<span class="colon"><span>:</span></span>';var f;var e;var c;var a=function(l){var k="";var m;l=""+l;for(var j=0;j<l.length;j++){m=l.charAt(j);if(m>="0"&&m<="9"){k+='<span class="digit-'+m+'"><span>'+m+"</span></span>"}}return'<span class="digits">'+k+"</span>"};function b(i){if(i=="hide"){f.className=f.className+" hide"}else{if(i=="blink"){c=document.getElementById("countdownLive");c.className="live";c.setAttribute("data-bi-countdown-effect","blink");e.className="hide"}}}function h(){var l=d.countdownTimer.end-Math.floor(new Date().getTime()/1000);if(e==null){e=document.getElementById("countdownTimer")}if(f==null){f=document.getElementById("countdown")}if(l<=-3600||(d.countdownTimer.onFinish=="hide"&&l<=0)){b("hide")}else{if(l<=0){b("blink")}}amplify.publish("countdown-tick");var k=l%60;k=k<10?"0"+k:k;var j=Math.floor(l/60)%60;j=j<10?"0"+j:j;var i=Math.floor(l/3600);var m=g+a(k);if(l>=60){m=a(j)+m}if(l>=3600){m=a(i)+g+m}e.innerHTML=m;setTimeout(h,500)}d.countdownTimer={end:0,onFinish:"blink",start:h,finish:b}}(BI));